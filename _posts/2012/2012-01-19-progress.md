---
title: "Progress!!! and Moar Screenshots!!!"
category: archive
---
Considering that I've only spent about 3 days working on this project, I've made a surprising amount of progress.

The hardest part so far was drawing the ink splatters on the spikes. Drawing them on the walls is easy. I track the ink balls that the player throws. When they collide with a wall, I build a bounded box for the "spray area" at the center of the ball when it collided with the wall. I take every wall that collides with that bounded box and determine what section of the ink splatter sprite it takes up using the origin of the ink ball as the center of the ink splatter sprite. After storing that rectangle, it's a simple matter of drawing that clip if the ink splatter sprite when the game renders the walls.

Getting the drawing on the spikes was a little harder, because they are technically an arbitrary shape. I tried using the pygame.transform.average_surfaces() function, but there are two issues: the function doesn't handle transparencies very well, and it averages the colors of the image instead of multiplying them (see right). I ended up creating a smaller image, the clip of the ink splatter sprite that would normally be drawn on a wall in the spike's position, and looping through the individual pixels of the spike sprite and the clip. I created a third image that was black wherever the pixels in both the spike and the clip were black, and transparent everywhere else. Fortunately, I only do this operation when the spike is actually hit by an ink ball. So the image is created once and stored in memory. It is deleted when the splatter moves off screen.

Next task will be to create enemies. This will mark the first time that I have used sound in one of my games. There will be one type of enemy. It will be entirely white (therefore invisible). The player will be made aware of its presence by the sound of growling. That will be the player's cue to be VERY careful with their paint. The enemies are harmless and docile when dry, but once you get paint on them, they become enraged and try to eat you!! The paint drips off after a little while, but they'll still be there. I haven't decided whether to make them pursue the player relentlessly (jumping on platforms and over pits) or just run at them until they hit a wall, at which point they'll just run into the wall ineffectually.